(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{150:function(t,e,n){"use strict";n.r(e);n(29);var r=n(10),l=n(30),o={layout:"admin",middleware:["admin-authenticated","admin-check-token"],head:function(){return{title:"Admin | Payment - ".concat("Dinamik 15")}},data:function(){return{dataLoading:!0,teamData:[],teamDetail:null,verificationTarget:null,verificationTargetIndex:null}},methods:{fetchTeamData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get(l.a.ADMIN_ENDPOINT.PAYMENT.INDEX);case 3:n=e.sent,data=n.data,t.teamData=data.payment,t.dataLoading=!1,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},viewDetail:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.teamDetail=e.teamData[t],$("#detailModal").modal("show");case 2:case"end":return n.stop()}}),n)})))()},verifyPayment:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.verificationTarget=e.teamData[t],e.verificationTargetIndex=t,$("#verifyModal").modal("show");case 3:case"end":return n.stop()}}),n)})))()},submitVerification:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={team_id:e.verificationTarget.id,status:1==t?"Accept":"Deny"},n.prev=1,n.next=4,e.$axios.post(l.a.ADMIN_ENDPOINT.PAYMENT.VERIFY,r);case 4:return n.sent,n.next=7,e.$axios.get(l.a.ADMIN_ENDPOINT.PAYMENT.GET+r.team_id);case 7:o=n.sent,data=o.data,e.teamData[e.verificationTargetIndex]=data.payment,$("#verifyModal").modal("hide"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),$("#verifyModal").modal("hide");case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))()},modalHideEvent:function(){var t=this;$("#detailModal").on("hidden.bs.modal",(function(){t.teamDetail=null})),$("#verifyModal").on("hidden.bs.modal",(function(){t.verificationTarget=null,t.verificationTargetIndex=null}))}},mounted:function(){this.fetchTeamData(),this.modalHideEvent()}},d=(n(258),n(25)),component=Object(d.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container dashboard-container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"font-weight-bold"},[t._v("Pembayaran")]),t._v(" "),t.dataLoading?n("div",{staticClass:"skeleton-wrapper"},[n("div",{staticClass:"skeleton content"}),t._v(" "),n("div",{staticClass:"skeleton content-75 mb-4"}),t._v(" "),n("div",{staticClass:"skeleton content"}),t._v(" "),n("div",{staticClass:"skeleton content-50 mb-4"}),t._v(" "),n("div",{staticClass:"skeleton content"}),t._v(" "),n("div",{staticClass:"skeleton content"})]):t._e(),t._v(" "),!t.dataLoading&&t.teamData.length>0?n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-borderless table-hover"},[t._m(0),t._v(" "),n("tbody",t._l(t.teamData,(function(e,r){return n("tr",{key:e.id},[n("td",[t._v(t._s(r+1))]),t._v(" "),n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.competition.name))]),t._v(" "),e.payment?n("td",[2==e.payment.status_verifikasi?n("span",{staticClass:"badge badge-pill badge-success"},[t._v("Pembayaran Berhasil")]):1==e.payment.status_verifikasi?n("span",{staticClass:"badge badge-pill badge-danger"},[t._v("Pembayaran Gagal")]):0==e.payment.status_verifikasi?n("span",{staticClass:"badge badge-pill badge-warning"},[t._v("Menunggu Verifikasi")]):t._e()]):n("td",[n("span",{staticClass:"badge badge-pill badge-danger"},[t._v("Belum Bayar")])]),t._v(" "),n("td",[n("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.viewDetail(r)}}},[t._v("Detail")]),t._v(" "),e.payment&&2!=e.payment.status_verifikasi?n("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.verifyPayment(r)}}},[t._v("Verifikasi")]):t._e()])])})),0)])]):t.dataLoading||0!=t.teamData.length?t._e():n("div",[t._v("\n                        Data tidak ditemukan\n                    ")])])])])]),t._v(" "),n("div",{staticClass:"modal fade",attrs:{id:"detailModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[t.teamDetail?n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-body"},[n("div",{staticClass:"mb-4"},[n("h4",{staticClass:"font-weight-bold"},[t._v("Bukti Pembayaran")]),t._v(" "),t.teamDetail.payment?n("div",[n("div",[n("div",{staticClass:"font-weight-bold"},[t._v("Nama Tim")]),t._v(" "),n("div",[t._v(t._s(t.teamDetail.name))])]),t._v(" "),n("div",{staticClass:"mt-3"},[n("div",{staticClass:"font-weight-bold"},[t._v("Nama Pengirim")]),t._v(" "),n("div",[t._v(t._s(t.teamDetail.payment.nama_pengirim))])]),t._v(" "),n("div",{staticClass:"mt-3"},[n("div",{staticClass:"font-weight-bold"},[t._v("Status")]),t._v(" "),n("div",[0==t.teamDetail.payment.status_verifikasi?n("span",{staticClass:"text-warning"},[t._v("Menunggu Verifikasi")]):t._e(),t._v(" "),1==t.teamDetail.payment.status_verifikasi?n("span",{staticClass:"text-danger"},[t._v("Pembayaran Gagal")]):t._e(),t._v(" "),2==t.teamDetail.payment.status_verifikasi?n("span",{staticClass:"text-success"},[t._v("Pembayaran Berhasil")]):t._e()])]),t._v(" "),n("div",{staticClass:"mt-3"},[n("div",{staticClass:"font-weight-bold"},[t._v("Bukti")]),t._v(" "),n("div",[n("img",{staticClass:"img img-thumbnail",attrs:{src:"http://dinamik15.test/bukti_pembayaran/"+t.teamDetail.payment.file_name,alt:"Bukti pembayaran"}})])])]):n("div",[n("p",[t._v("Belum Bayar")])])])]),t._v(" "),t._m(1)]):n("div",{staticClass:"modal-content"},[t._m(2)])])]),t._v(" "),n("div",{staticClass:"modal fade",attrs:{id:"verifyModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[t.verificationTarget?n("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn mr-auto btn-sm btn-link",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Tutup")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(e){return t.submitVerification(0)}}},[t._v("Tolak")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"},on:{click:function(e){return t.submitVerification(1)}}},[t._v("Terima")])])]):n("div",{staticClass:"modal-content"},[t._m(4)])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("#")]),t._v(" "),n("th",[t._v("Nama Tim")]),t._v(" "),n("th",[t._v("Kompetisi")]),t._v(" "),n("th",[t._v("Status")]),t._v(" "),n("th")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Tutup")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-body"},[e("div",{staticClass:"skeleton-wrapper"},[e("div",{staticClass:"skeleton title"}),this._v(" "),e("div",{staticClass:"skeleton content"}),this._v(" "),e("div",{staticClass:"skeleton content-50"}),this._v(" "),e("div",{staticClass:"skeleton content"}),this._v(" "),e("div",{staticClass:"skeleton content-75"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-body"},[e("div",{staticClass:"mb-4"},[e("h4",{staticClass:"font-weight-bold"},[this._v("Verifikasi Pembayaran")]),this._v(" "),e("p",[this._v("Klik tombol terima jika pembayaran valid, dan tolak jika pembayaran tidak valid (tim akan diminta untuk mengupload ulang bukti pembayaran).")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-body"},[e("div",{staticClass:"skeleton-wrapper"},[e("div",{staticClass:"skeleton title"}),this._v(" "),e("div",{staticClass:"skeleton content"}),this._v(" "),e("div",{staticClass:"skeleton content-50"}),this._v(" "),e("div",{staticClass:"skeleton content"}),this._v(" "),e("div",{staticClass:"skeleton content-75"})])])}],!1,null,"7f07bc2c",null);e.default=component.exports},247:function(t,e,n){},258:function(t,e,n){"use strict";var r=n(247);n.n(r).a}}]);